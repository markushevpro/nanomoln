import{a as Sa,b as Ds,d as ie}from"/build/_shared/chunk-CL6NUHYG.js";import{b as M,c as he,d as Da}from"/build/_shared/chunk-4OAUXVZ5.js";import{B as Qo,D as le,E as xa,F as ga,G as ha,J as w,K as Ca,a as _e,b as aa,c as na,d as fa,e as la,g as ot,j as sa,l as ca,o as da,p as Ko,r as We,s as Yo,t as Zo,u as ua,v as ia,w as J,x as pa,y as ma,z as Ia}from"/build/_shared/chunk-HAMAQUIH.js";import{a as y,f as ta,n as d}from"/build/_shared/chunk-WD2TQZTD.js";import{b as ra,c as Ss,d as s}from"/build/_shared/chunk-T36URGAI.js";var Se=ra((Vu,Jo)=>{(function(){"use strict";var o={}.hasOwnProperty;function e(){for(var a="",n=0;n<arguments.length;n++){var f=arguments[n];f&&(a=t(a,r(f)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return e.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var n="";for(var f in a)o.call(a,f)&&a[f]&&(n=t(n,f));return n}function t(a,n){return n?a?a+" "+n:a+n:a}typeof Jo<"u"&&Jo.exports?(e.default=e,Jo.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var Zn=ra((Nm,Yn)=>{"use strict";Yn.exports=function o(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var t,a,n;if(Array.isArray(e)){if(t=e.length,t!=r.length)return!1;for(a=t;a--!==0;)if(!o(e[a],r[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(n=Object.keys(e),t=n.length,t!==Object.keys(r).length)return!1;for(a=t;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,n[a]))return!1;for(a=t;a--!==0;){var f=n[a];if(!o(e[f],r[f]))return!1}return!0}return e!==e&&r!==r}});function Cd(){return[{title:"nanomoln"},{name:"description",content:"Simple files manipulation"}]}var ya=s(y(),1),go=(0,ya.createContext)(void 0),Dd=go.Provider;var ho=s(y(),1);var va={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};var k=(o,e,r,t)=>{let a=(0,ho.forwardRef)(({color:n="currentColor",size:f=24,stroke:l=2,className:c,children:i,...u},p)=>(0,ho.createElement)("svg",{ref:p,...va[o],width:f,height:f,className:["tabler-icon",`tabler-icon-${e}`,c].join(" "),...o==="filled"?{fill:n}:{strokeWidth:l,stroke:n},...u},[...t.map(([I,h])=>(0,ho.createElement)(I,h)),...Array.isArray(i)?i:[i]]));return a.displayName=`${r}`,a};var rt=k("outline","download","IconDownload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);var tt=k("outline","folder-up","IconFolderUp",[["path",{d:"M12 19h-7a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v3.5",key:"svg-0"}],["path",{d:"M19 22v-6",key:"svg-1"}],["path",{d:"M22 19l-3 -3l-3 3",key:"svg-2"}]]);var at=k("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);var nt=k("outline","reload","IconReload",[["path",{d:"M19.933 13.041a8 8 0 1 1 -9.925 -8.788c3.899 -1 7.935 1.007 9.425 4.747",key:"svg-0"}],["path",{d:"M20 4v5h-5",key:"svg-1"}]]);var Co=k("outline","upload","IconUpload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);var ft=k("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);var lt=k("filled","file-filled","IconFileFilled",[["path",{d:"M12 2l.117 .007a1 1 0 0 1 .876 .876l.007 .117v4l.005 .15a2 2 0 0 0 1.838 1.844l.157 .006h4l.117 .007a1 1 0 0 1 .876 .876l.007 .117v9a3 3 0 0 1 -2.824 2.995l-.176 .005h-10a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-14a3 3 0 0 1 2.824 -2.995l.176 -.005h5z",key:"svg-0"}],["path",{d:"M19 7h-4l-.001 -4.001z",key:"svg-1"}]]);var we=k("filled","folder-filled","IconFolderFilled",[["path",{d:"M9 3a1 1 0 0 1 .608 .206l.1 .087l2.706 2.707h6.586a3 3 0 0 1 2.995 2.824l.005 .176v8a3 3 0 0 1 -2.824 2.995l-.176 .005h-14a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-11a3 3 0 0 1 2.824 -2.995l.176 -.005h4z",key:"svg-0"}]]);var st=k("filled","trash-filled","IconTrashFilled",[["path",{d:"M20 6a1 1 0 0 1 .117 1.993l-.117 .007h-.081l-.919 11a3 3 0 0 1 -2.824 2.995l-.176 .005h-8c-1.598 0 -2.904 -1.249 -2.992 -2.75l-.005 -.167l-.923 -11.083h-.08a1 1 0 0 1 -.117 -1.993l.117 -.007h16z",key:"svg-0"}],["path",{d:"M14 2a2 2 0 0 1 2 2a1 1 0 0 1 -1.993 .117l-.007 -.117h-4l-.007 .117a1 1 0 0 1 -1.993 -.117a2 2 0 0 1 1.85 -1.995l.15 -.005h4z",key:"svg-1"}]]);var Ve=s(y(),1);var Ce=s(y(),1);var ct=class{async post(e,r){return await(await fetch(e,{method:"POST",body:JSON.stringify(r)})).json()}async rename(e,r,t){await this.post("/api/folders/rename",{path:e,original:r,update:t})}async createFolder(e,r){await this.post("/api/folders/create",{path:e,name:r})}async getFolders(e,r){return await this.post("/api/folders",{path:e,top:r})}async getFiles(e){return await this.post("/api/folders/files",{path:e})}async moveFiles(e,r){await this.post("/api/folders/move",{files:e,target:r})}async uploadFiles(e,r){let t=new FormData;e.forEach(a=>{t.append("file",a)}),await fetch(`/api/folders/upload?target=${encodeURIComponent(r)}`,{method:"POST",body:t})}async removeFiles(e){await this.post("/api/folders/remove",{list:e})}},pe=new ct;function ys(o){return o.replace(/[\\]+/g,"/")}function $o(o,e){return ys(e).replace(o.path,"")}function Fa(o){return{type:"directory",dir:o?.path??"",draft:!0,relative:"",path:"",filename:"",size:0,files:[],folders:[]}}function vs(o,e){return{dir:e,filename:o.name,path:`${e}/${o.name}`,type:"file",size:File.length}}function ba(o,e){return o.map(r=>vs(r,e))}var Oa={description:"Mwgas"};var Fs=3e3;function Ba(o,e){Sa.show({withBorder:!0,color:"red",autoClose:Fs,classNames:Oa,title:o,message:e})}var Pa={dir:{draft:Fa}};function dt(o,e,r){let t=!!o.folders.find(a=>a.filename===e)||!!o.files.find(a=>a.filename===e);return t&&r(e),t}async function wa(o,e,r){let t=await pe.getFolders(e.path,r),a=await pe.getFiles(e.path);return{[o]:{...e,folders:t,files:a}}}async function ka(o,e){return o?await wa("folder",o,e?.path??o.path):e?await wa("top",e,e.path):{}}function Ta(o){return!!o?.folders.find(e=>!!e.draft)}function bs(o){return!!o.relative}function La(o,e){return o&&{...o,folders:[...o.folders,e]}}function Ra(o,e){return o.map(r=>r.path===e.path?{...r,draft:!0}:r)}function Aa(o){return o.filter(e=>!e.draft||!!e.filename).map(e=>({...e,draft:!1}))}function So(o){return{...o,folders:Aa(o.folders),files:Aa(o.files)}}function Ma(o,e){return!e||!o?e:bs(o)?{...e,folders:Ra(e.folders,o)}:{...e,files:Ra(e.files,o)}}function Ea(o,e){let r=Pa.dir.draft();if(o&&!Ta(o))return{folder:La(o,r)};if(e&&!Ta(e))return{top:La(e,r)}}function Na(o,e,r){if(e)return{folder:Ma(o,So(e))};if(r)return{top:Ma(o,So(r))}}var ut=s(y(),1);var Ha=s(y(),1);function qa(){let{folder:o,top:e}=M(),{update:r}=he();return(0,Ha.useCallback)(()=>{if(r){let a=Ea(o,e);a&&r(a)}},[o,e,r])}var Ua=s(y(),1);function za(){let{folder:o,top:e}=M(),{update:r}=he();return(0,Ua.useCallback)(a=>{if(r){let n=Na(a,o,e);n&&r(n)}},[o,e,r])}var _a=s(y(),1);function Wa(){let{top:o,folder:e}=M(),{update:r}=he(),t=typeof window<"u"?window.location.pathname:"";return(0,_a.useCallback)(()=>{r&&ka(e,o).then(n=>{t===window.location.pathname&&r({...n,locked:[]})})},[e,t,o,r])}var Ga=(o,e)=>o.filename.toLocaleLowerCase().localeCompare(e.filename.toLocaleLowerCase());function U(){let{folder:o,top:e,temporary:r}=M(),t=Wa(),a=qa(),n=za(),f=(0,ut.useMemo)(()=>o??e,[o,e]);return{data:(0,ut.useMemo)(()=>f&&{...f,folders:f.folders.sort(Ga),files:[...f.files,...r.filter(c=>!f.files.find(i=>i.filename===c.filename))].sort(Ga)},[r,f]),reload:t,create:a,edit:n}}function Ge(){let{data:o,reload:e}=U(),{folder:r,top:t}=M(),{lock:a,temp:n,update:f}=he(),l=(0,Ce.useCallback)(I=>{Ba("Error",`Folder or file called "${I}" already exist`),a([])},[a]),c=(0,Ce.useCallback)(async(I,h)=>{let m=h.split(/(\/|\\)/)[0],C=!1;o&&I.draft&&(m&&m!==I.text?(I.text?dt(o,m,l)?C=!0:await pe.rename(o.path,I.text,m):dt(o,m,l)?C=!0:await pe.createFolder(o.path,m),C||e?.()):f({folder:r&&So(r),top:t&&So(t),locked:[]}))},[o,e,f,r,t,l]),i=(0,Ce.useCallback)(async(I,h)=>{I.includes(h)||(a(I),await pe.moveFiles(I,h),e?.())},[e,a]),u=(0,Ce.useCallback)(async(I,h)=>{let m=ba(I,h);n(m),a(m.map(C=>C.filename)),await pe.uploadFiles(I,h),e?.()},[a,n,e]),p=(0,Ce.useCallback)(async I=>{a(I),await pe.removeFiles(I),e?.()},[a,e]);return(0,Ce.useMemo)(()=>({rename:c,move:i,upload:u,remove:p}),[c,i,u,p])}var ee=s(d(),1);function Os({list:o}){let{data:e}=U(),r=(0,Ve.useCallback)(()=>{let t=o.filter(f=>e?.folders.find(l=>l.path===f)),a=o.filter(f=>e?.files.find(l=>l.path===f)),n="";return a.length>0&&t.length>0?n=`${a.length} ${a.length===1?"file":"files"} and ${t.length} ${t.length===1?"directory":"directories"}`:a.length>0?n=a.length===1?a[0]:`${a.length} files`:t.length>0&&(n=t.length===1?t[0]:`${t.length} directories`),n},[o,e]);return(0,ee.jsx)(ee.Fragment,{children:(0,ee.jsxs)("p",{children:["Are you sure to remove ",r(),"?"]})})}function Bs({list:o,onRemove:e}){let{hide:r}=ie(),{remove:t}=Ge(),a=(0,Ve.useCallback)(()=>{t(o),r(),e?.()},[o,r,t,e]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(le,{style:{marginRight:"auto"},variant:"subtle",onClick:r,children:"Cancel"}),(0,ee.jsx)(le,{color:"red",onClick:a,children:"Remove"})]})}function Va(o,e){let{show:r}=ie(),t=(0,Ve.useCallback)(()=>{r("Removing files",(0,ee.jsx)(Os,{list:o}),(0,ee.jsx)(Bs,{list:o,onRemove:e}))},[r,o,e]);return(0,Ve.useMemo)(()=>({confirm:t}),[t])}var je=s(d(),1);function Xe({files:o,size:e,onRemove:r}){let{confirm:t}=Va(o,r);return(0,je.jsx)(je.Fragment,{children:(0,je.jsx)(J,{color:"red",size:e??"lg",variant:"subtle",onClick:t,children:(0,je.jsx)(st,{size:20})})})}var Te=s(d(),1);function ja({selection:o}){return!o||o.selected.length<1?(0,Te.jsx)(Te.Fragment,{}):(0,Te.jsx)(Te.Fragment,{children:(0,Te.jsx)(Xe,{files:o.selected,onRemove:o.reset})})}var Xa=s(Se(),1);var er="200px";var _={faded:"gnp3A",link:"HN-kO",hideOnHover:"_-1MGa",showOnHover:"kxecj",pullRight:"w5N5L",actions:"_70m97",icon:"_3ydyO",fixed:"jrqHC"};var it=s(d(),1);function pt({visible:o,actions:e}){return!o||!e?null:(0,it.jsx)(w.Td,{className:(0,Xa.default)(_.pullRight,_.showOnHover),w:er,children:(0,it.jsx)("div",{className:_.actions,children:e})})}var Ya=s(Se(),1);var Ka={link:"_7dNV8"};var mt=s(d(),1);function Za({to:o,children:e,className:r}){return(0,mt.jsx)(Ia,{c:"primary.1",className:(0,Ya.default)(Ka.link,r),component:ta,to:o,children:(0,mt.jsx)("span",{children:e})})}var Ke=s(y(),1),$a=s(d(),1);function Qa({value:o,disabled:e,onSave:r}){let[t,a]=(0,Ke.useState)(o??""),n=i=>{a(i.currentTarget.value)},f=(0,Ke.useCallback)(()=>{r(o??"")},[o,r]),l=(0,Ke.useCallback)(()=>{r(t)},[t,r]),c=(0,Ke.useCallback)(i=>{i.key==="Enter"&&l(),i.key==="Escape"&&f()},[l,f]);return(0,$a.jsx)(Ca,{autoFocus:!0,disabled:e,value:t,onBlur:f,onChange:n,onKeyUp:c})}var Do=s(d(),1);function It({visible:o,locked:e,draft:r,text:t,link:a,onSave:n}){return o?(0,Do.jsx)(w.Td,{maw:"100%",children:r&&n?(0,Do.jsx)(Qa,{disabled:e,value:t,onSave:n}):a?(0,Do.jsx)(Za,{className:_.link,to:a,children:t}):(0,Do.jsx)("div",{className:_.file,children:t})}):null}var Ja=s(Se(),1);var xt=s(d(),1);function gt({visible:o,icon:e}){return o?(0,xt.jsx)(w.Td,{className:(0,Ja.default)(_.icon,_.faded),w:"40px",children:(0,xt.jsx)(xa,{children:e})}):null}var en=s(Se(),1);var on=s(d(),1);function ht({visible:o,info:e,actions:r}){return o?(0,on.jsx)(w.Td,{className:(0,en.default)(_.faded,r&&_.hideOnHover),w:er,children:e}):null}var rn=s(y(),1);var Ct=s(d(),1);function St({visible:o,checked:e,onToggle:r}){let t=(0,rn.useCallback)(a=>{r?.(a.currentTarget.checked)},[r]);return o?(0,Ct.jsx)(w.Td,{className:_.fixed,w:"40px",children:(0,Ct.jsx)(Qo,{checked:e,onChange:t})}):null}var se=s(d(),1);function or({item:o,checked:e,onToggle:r,onSave:t}){return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(St,{checked:e,visible:o.selectable,onToggle:r}),(0,se.jsx)(gt,{visible:o.showIcon,...o}),(0,se.jsx)(It,{visible:!0,...o,onSave:t}),(0,se.jsx)(ht,{visible:!o.draft,...o,actions:!!o.actions}),(0,se.jsx)(pt,{visible:!o.draft,...o})]})}var tn=s(y(),1),rr=(0,tn.createContext)({dragDropManager:void 0});var jn=s(d(),1);function oe(o){return"Minified Redux error #"+o+"; visit https://redux.js.org/Errors?code="+o+" for the full message or use the non-minified dev environment for full errors. "}var an=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Dt=function(){return Math.random().toString(36).substring(7).split("").join(".")},nn={INIT:"@@redux/INIT"+Dt(),REPLACE:"@@redux/REPLACE"+Dt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Dt()}};function ws(o){if(typeof o!="object"||o===null)return!1;for(var e=o;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(o)===e}function yt(o,e,r){var t;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(oe(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(oe(1));return r(yt)(o,e)}if(typeof o!="function")throw new Error(oe(2));var a=o,n=e,f=[],l=f,c=!1;function i(){l===f&&(l=f.slice())}function u(){if(c)throw new Error(oe(3));return n}function p(C){if(typeof C!="function")throw new Error(oe(4));if(c)throw new Error(oe(5));var F=!0;return i(),l.push(C),function(){if(F){if(c)throw new Error(oe(6));F=!1,i();var b=l.indexOf(C);l.splice(b,1),f=null}}}function I(C){if(!ws(C))throw new Error(oe(7));if(typeof C.type>"u")throw new Error(oe(8));if(c)throw new Error(oe(9));try{c=!0,n=a(n,C)}finally{c=!1}for(var F=f=l,S=0;S<F.length;S++){var b=F[S];b()}return C}function h(C){if(typeof C!="function")throw new Error(oe(10));a=C,I({type:nn.REPLACE})}function m(){var C,F=p;return C={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(oe(11));function D(){b.next&&b.next(u())}D();var P=F(D);return{unsubscribe:P}}},C[an]=function(){return this},C}return I({type:nn.INIT}),t={dispatch:I,subscribe:p,getState:u,replaceReducer:h},t[an]=m,t}function g(o,e,...r){if(Ts()&&e===void 0)throw new Error("invariant requires an error message argument");if(!o){let t;if(e===void 0)t=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;t=new Error(e.replace(/%s/g,function(){return r[a++]})),t.name="Invariant Violation"}throw t.framesToPop=1,t}}function Ts(){return typeof process<"u"&&!0}function fn(o,e,r){return e.split(".").reduce((t,a)=>t&&t[a]?t[a]:r||null,o)}function ln(o,e){return o.filter(r=>r!==e)}function tr(o){return typeof o=="object"}function sn(o,e){let r=new Map,t=n=>{r.set(n,r.has(n)?r.get(n)+1:1)};o.forEach(t),e.forEach(t);let a=[];return r.forEach((n,f)=>{n===1&&a.push(f)}),a}function cn(o,e){return o.filter(r=>e.indexOf(r)>-1)}var Ye="dnd-core/INIT_COORDS",De="dnd-core/BEGIN_DRAG",Ze="dnd-core/PUBLISH_DRAG_SOURCE",ye="dnd-core/HOVER",ve="dnd-core/DROP",Fe="dnd-core/END_DRAG";function vt(o,e){return{type:Ye,payload:{sourceClientOffset:e||null,clientOffset:o||null}}}var Ls={type:Ye,payload:{clientOffset:null,sourceClientOffset:null}};function dn(o){return function(r=[],t={publishSource:!0}){let{publishSource:a=!0,clientOffset:n,getSourceClientOffset:f}=t,l=o.getMonitor(),c=o.getRegistry();o.dispatch(vt(n)),Rs(r,l,c);let i=ks(r,l);if(i==null){o.dispatch(Ls);return}let u=null;if(n){if(!f)throw new Error("getSourceClientOffset must be defined");As(f),u=f(i)}o.dispatch(vt(n,u));let I=c.getSource(i).beginDrag(l,i);if(I==null)return;Ms(I),c.pinSource(i);let h=c.getSourceType(i);return{type:De,payload:{itemType:h,item:I,sourceId:i,clientOffset:n||null,sourceClientOffset:u||null,isSourcePublic:!!a}}}}function Rs(o,e,r){g(!e.isDragging(),"Cannot call beginDrag while dragging."),o.forEach(function(t){g(r.getSource(t),"Expected sourceIds to be registered.")})}function As(o){g(typeof o=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Ms(o){g(tr(o),"Item must be an object.")}function ks(o,e){let r=null;for(let t=o.length-1;t>=0;t--)if(e.canDragSource(o[t])){r=o[t];break}return r}function Es(o,e,r){return e in o?Object.defineProperty(o,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[e]=r,o}function Ns(o){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},t=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),t.forEach(function(a){Es(o,a,r[a])})}return o}function un(o){return function(r={}){let t=o.getMonitor(),a=o.getRegistry();Hs(t),zs(t).forEach((f,l)=>{let c=qs(f,l,a,t),i={type:ve,payload:{dropResult:Ns({},r,c)}};o.dispatch(i)})}}function Hs(o){g(o.isDragging(),"Cannot call drop while not dragging."),g(!o.didDrop(),"Cannot call drop twice during one drag operation.")}function qs(o,e,r,t){let a=r.getTarget(o),n=a?a.drop(t,o):void 0;return Us(n),typeof n>"u"&&(n=e===0?{}:t.getDropResult()),n}function Us(o){g(typeof o>"u"||tr(o),"Drop result must either be an object or undefined.")}function zs(o){let e=o.getTargetIds().filter(o.canDropOnTarget,o);return e.reverse(),e}function pn(o){return function(){let r=o.getMonitor(),t=o.getRegistry();_s(r);let a=r.getSourceId();return a!=null&&(t.getSource(a,!0).endDrag(r,a),t.unpinSource()),{type:Fe}}}function _s(o){g(o.isDragging(),"Cannot call endDrag while not dragging.")}function yo(o,e){return e===null?o===null:Array.isArray(o)?o.some(r=>r===e):o===e}function mn(o){return function(r,{clientOffset:t}={}){Ws(r);let a=r.slice(0),n=o.getMonitor(),f=o.getRegistry(),l=n.getItemType();return Vs(a,f,l),Gs(a,n,f),js(a,n,f),{type:ye,payload:{targetIds:a,clientOffset:t||null}}}}function Ws(o){g(Array.isArray(o),"Expected targetIds to be an array.")}function Gs(o,e,r){g(e.isDragging(),"Cannot call hover while not dragging."),g(!e.didDrop(),"Cannot call hover after drop.");for(let t=0;t<o.length;t++){let a=o[t];g(o.lastIndexOf(a)===t,"Expected targetIds to be unique in the passed array.");let n=r.getTarget(a);g(n,"Expected targetIds to be registered.")}}function Vs(o,e,r){for(let t=o.length-1;t>=0;t--){let a=o[t],n=e.getTargetType(a);yo(n,r)||o.splice(t,1)}}function js(o,e,r){o.forEach(function(t){r.getTarget(t).hover(e,t)})}function In(o){return function(){if(o.getMonitor().isDragging())return{type:Ze}}}function xn(o){return{beginDrag:dn(o),publishDragSource:In(o),hover:mn(o),drop:un(o),endDrag:pn(o)}}var ar=class{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){let e=this,{dispatch:r}=this.store;function t(n){return(...f)=>{let l=n.apply(e,f);typeof l<"u"&&r(l)}}let a=xn(this);return Object.keys(a).reduce((n,f)=>{let l=a[f];return n[f]=t(l),n},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{let t=this.store.getState().refCount>0;this.backend&&(t&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!t&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}};function Xs(o,e){return{x:o.x+e.x,y:o.y+e.y}}function gn(o,e){return{x:o.x-e.x,y:o.y-e.y}}function hn(o){let{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:t}=o;return!e||!r||!t?null:gn(Xs(e,t),r)}function Cn(o){let{clientOffset:e,initialClientOffset:r}=o;return!e||!r?null:gn(e,r)}var Qe=[],nr=[];Qe.__IS_NONE__=!0;nr.__IS_ALL__=!0;function Sn(o,e){return o===Qe?!1:o===nr||typeof e>"u"?!0:cn(e,o).length>0}var fr=class{subscribeToStateChange(e,r={}){let{handlerIds:t}=r;g(typeof e=="function","listener must be a function."),g(typeof t>"u"||Array.isArray(t),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId,n=()=>{let f=this.store.getState(),l=f.stateId;try{l===a||l===a+1&&!Sn(f.dirtyHandlerIds,t)||e()}finally{a=l}};return this.store.subscribe(n)}subscribeToOffsetChange(e){g(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset,t=()=>{let a=this.store.getState().dragOffset;a!==r&&(r=a,e())};return this.store.subscribe(t)}canDragSource(e){if(!e)return!1;let r=this.registry.getSource(e);return g(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;let r=this.registry.getTarget(e);if(g(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;let t=this.registry.getTargetType(e),a=this.getItemType();return yo(t,a)&&r.canDrop(this,e)}isDragging(){return Boolean(this.getItemType())}isDraggingSource(e){if(!e)return!1;let r=this.registry.getSource(e,!0);if(g(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;let t=this.registry.getSourceType(e),a=this.getItemType();return t!==a?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;let{shallow:t}=r;if(!this.isDragging())return!1;let a=this.registry.getTargetType(e),n=this.getItemType();if(n&&!yo(a,n))return!1;let f=this.getTargetIds();if(!f.length)return!1;let l=f.indexOf(e);return t?l===f.length-1:l>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return hn(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Cn(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}};var Dn=typeof globalThis<"u"?globalThis:self,yn=Dn.MutationObserver||Dn.WebKitMutationObserver;function Ft(o){return function(){let r=setTimeout(a,0),t=setInterval(a,50);function a(){clearTimeout(r),clearInterval(t),o()}}}function Ks(o){let e=1,r=new yn(o),t=document.createTextNode("");return r.observe(t,{characterData:!0}),function(){e=-e,t.data=e}}var vn=typeof yn=="function"?Ks:Ft;var lr=class{enqueueTask(e){let{queue:r,requestFlush:t}=this;r.length||(t(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:e}=this;for(;this.index<e.length;){let r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let t=0,a=e.length-this.index;t<a;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=vn(this.flush),this.requestErrorThrow=Ft(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}};var sr=class{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}};var cr=class{create(e){let r=this.freeTasks,t=r.length?r.pop():new sr(this.onError,a=>r[r.length]=a);return t.task=e,t}constructor(e){this.onError=e,this.freeTasks=[]}};var Fn=new lr,Ys=new cr(Fn.registerPendingError);function bn(o){Fn.enqueueTask(Ys.create(o))}var vo="dnd-core/ADD_SOURCE",Fo="dnd-core/ADD_TARGET",bo="dnd-core/REMOVE_SOURCE",Le="dnd-core/REMOVE_TARGET";function On(o){return{type:vo,payload:{sourceId:o}}}function Bn(o){return{type:Fo,payload:{targetId:o}}}function Pn(o){return{type:bo,payload:{sourceId:o}}}function wn(o){return{type:Le,payload:{targetId:o}}}function Tn(o){g(typeof o.canDrag=="function","Expected canDrag to be a function."),g(typeof o.beginDrag=="function","Expected beginDrag to be a function."),g(typeof o.endDrag=="function","Expected endDrag to be a function.")}function Ln(o){g(typeof o.canDrop=="function","Expected canDrop to be a function."),g(typeof o.hover=="function","Expected hover to be a function."),g(typeof o.drop=="function","Expected beginDrag to be a function.")}function dr(o,e){if(e&&Array.isArray(o)){o.forEach(r=>dr(r,!1));return}g(typeof o=="string"||typeof o=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var K;(function(o){o.SOURCE="SOURCE",o.TARGET="TARGET"})(K||(K={}));var Zs=0;function Rn(){return Zs++}function Qs(o){let e=Rn().toString();switch(o){case K.SOURCE:return`S${e}`;case K.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${o}`)}}function An(o){switch(o[0]){case"S":return K.SOURCE;case"T":return K.TARGET;default:throw new Error(`Cannot parse handler ID: ${o}`)}}function Mn(o,e){let r=o.entries(),t=!1;do{let{done:a,value:[,n]}=r.next();if(n===e)return!0;t=!!a}while(!t);return!1}var ur=class{addSource(e,r){dr(e),Tn(r);let t=this.addHandler(K.SOURCE,e,r);return this.store.dispatch(On(t)),t}addTarget(e,r){dr(e,!0),Ln(r);let t=this.addHandler(K.TARGET,e,r);return this.store.dispatch(Bn(t)),t}containsHandler(e){return Mn(this.dragSources,e)||Mn(this.dropTargets,e)}getSource(e,r=!1){return g(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return g(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return g(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return g(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return An(e)===K.SOURCE}isTargetId(e){return An(e)===K.TARGET}removeSource(e){g(this.getSource(e),"Expected an existing source."),this.store.dispatch(Pn(e)),bn(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){g(this.getTarget(e),"Expected an existing target."),this.store.dispatch(wn(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){let r=this.getSource(e);g(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){g(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,t){let a=Qs(e);return this.types.set(a,r),e===K.SOURCE?this.dragSources.set(a,t):e===K.TARGET&&this.dropTargets.set(a,t),a}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}};var $s=(o,e)=>o===e;function kn(o,e){return!o&&!e?!0:!o||!e?!1:o.x===e.x&&o.y===e.y}function En(o,e,r=$s){if(o.length!==e.length)return!1;for(let t=0;t<o.length;++t)if(!r(o[t],e[t]))return!1;return!0}function Nn(o=Qe,e){switch(e.type){case ye:break;case vo:case Fo:case Le:case bo:return Qe;case De:case Ze:case Fe:case ve:default:return nr}let{targetIds:r=[],prevTargetIds:t=[]}=e.payload,a=sn(r,t);if(!(a.length>0||!En(r,t)))return Qe;let f=t[t.length-1],l=r[r.length-1];return f!==l&&(f&&a.push(f),l&&a.push(l)),a}function Js(o,e,r){return e in o?Object.defineProperty(o,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[e]=r,o}function ec(o){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},t=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),t.forEach(function(a){Js(o,a,r[a])})}return o}var Hn={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function qn(o=Hn,e){let{payload:r}=e;switch(e.type){case Ye:case De:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case ye:return kn(o.clientOffset,r.clientOffset)?o:ec({},o,{clientOffset:r.clientOffset});case Fe:case ve:return Hn;default:return o}}function oc(o,e,r){return e in o?Object.defineProperty(o,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[e]=r,o}function $e(o){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},t=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),t.forEach(function(a){oc(o,a,r[a])})}return o}var rc={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Un(o=rc,e){let{payload:r}=e;switch(e.type){case De:return $e({},o,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Ze:return $e({},o,{isSourcePublic:!0});case ye:return $e({},o,{targetIds:r.targetIds});case Le:return o.targetIds.indexOf(r.targetId)===-1?o:$e({},o,{targetIds:ln(o.targetIds,r.targetId)});case ve:return $e({},o,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case Fe:return $e({},o,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return o}}function zn(o=0,e){switch(e.type){case vo:case Fo:return o+1;case bo:case Le:return o-1;default:return o}}function _n(o=0){return o+1}function tc(o,e,r){return e in o?Object.defineProperty(o,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[e]=r,o}function ac(o){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},t=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),t.forEach(function(a){tc(o,a,r[a])})}return o}function Wn(o={},e){return{dirtyHandlerIds:Nn(o.dirtyHandlerIds,{type:e.type,payload:ac({},e.payload,{prevTargetIds:fn(o,"dragOperation.targetIds",[])})}),dragOffset:qn(o.dragOffset,e),refCount:zn(o.refCount,e),dragOperation:Un(o.dragOperation,e),stateId:_n(o.stateId)}}function Gn(o,e=void 0,r={},t=!1){let a=nc(t),n=new fr(a,new ur(a)),f=new ar(a,n),l=o(f,e,r);return f.receiveBackend(l),f}function nc(o){let e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return yt(Wn,o&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}var pr=s(y(),1);function fc(o,e){if(o==null)return{};var r=lc(o,e),t,a;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);for(a=0;a<n.length;a++)t=n[a],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(o,t)&&(r[t]=o[t])}return r}function lc(o,e){if(o==null)return{};var r={},t=Object.keys(o),a,n;for(n=0;n<t.length;n++)a=t[n],!(e.indexOf(a)>=0)&&(r[a]=o[a]);return r}var Vn=0,ir=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),Xn=(0,pr.memo)(function(e){var{children:r}=e,t=fc(e,["children"]);let[a,n]=sc(t);return(0,pr.useEffect)(()=>{if(n){let f=Kn();return++Vn,()=>{--Vn===0&&(f[ir]=null)}}},[]),(0,jn.jsx)(rr.Provider,{value:a,children:r})});function sc(o){if("manager"in o)return[{dragDropManager:o.manager},!1];let e=cc(o.backend,o.context,o.options,o.debugMode),r=!o.context;return[e,r]}function cc(o,e=Kn(),r,t){let a=e;return a[ir]||(a[ir]={dragDropManager:Gn(o,e,r,t)}),a[ir]}function Kn(){return typeof globalThis<"u"?globalThis:window}var Qn=s(Zn(),1),Ir=s(y(),1);var mr=s(y(),1),Y=typeof window<"u"?mr.useLayoutEffect:mr.useEffect;function $n(o,e,r){let[t,a]=(0,Ir.useState)(()=>e(o)),n=(0,Ir.useCallback)(()=>{let f=e(o);(0,Qn.default)(t,f)||(a(f),r&&r())},[t,o,r]);return Y(n),[t,n]}function Jn(o,e,r){let[t,a]=$n(o,e,r);return Y(function(){let f=o.getHandlerId();if(f!=null)return o.subscribeToStateChange(a,{handlerIds:[f]})},[o,a]),t}function xr(o,e,r){return Jn(e,o||(()=>({})),()=>r.reconnect())}var ef=s(y(),1);function gr(o,e){let r=[...e||[]];return e==null&&typeof o!="function"&&r.push(o),(0,ef.useMemo)(()=>typeof o=="function"?o():o,r)}var bt=s(y(),1);function of(o){return(0,bt.useMemo)(()=>o.hooks.dragSource(),[o])}function rf(o){return(0,bt.useMemo)(()=>o.hooks.dragPreview(),[o])}var lf=s(y(),1);var Ot=!1,Bt=!1,hr=class{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){g(!Ot,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ot=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Ot=!1}}isDragging(){if(!this.sourceId)return!1;g(!Bt,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Bt=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Bt=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}};var Pt=!1,Cr=class{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;g(!Pt,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Pt=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Pt=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}};function tf(o,e,r){let t=r.getRegistry(),a=t.addTarget(o,e);return[a,()=>t.removeTarget(a)]}function af(o,e,r){let t=r.getRegistry(),a=t.addSource(o,e);return[a,()=>t.removeSource(a)]}function Oo(o,e,r,t){let a=r?r.call(t,o,e):void 0;if(a!==void 0)return!!a;if(o===e)return!0;if(typeof o!="object"||!o||typeof e!="object"||!e)return!1;let n=Object.keys(o),f=Object.keys(e);if(n.length!==f.length)return!1;let l=Object.prototype.hasOwnProperty.bind(e);for(let c=0;c<n.length;c++){let i=n[c];if(!l(i))return!1;let u=o[i],p=e[i];if(a=r?r.call(t,u,p,i):void 0,a===!1||a===void 0&&u!==p)return!1}return!0}function Bo(o){return o!==null&&typeof o=="object"&&Object.prototype.hasOwnProperty.call(o,"current")}var Po=s(y(),1);function dc(o){if(typeof o.type=="string")return;let e=o.type.displayName||o.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function uc(o){return(e=null,r=null)=>{if(!(0,Po.isValidElement)(e)){let n=e;return o(n,r),n}let t=e;return dc(t),ic(t,r?n=>o(n,r):o)}}function Sr(o){let e={};return Object.keys(o).forEach(r=>{let t=o[r];if(r.endsWith("Ref"))e[r]=o[r];else{let a=uc(t);e[r]=()=>a}}),e}function nf(o,e){typeof o=="function"?o(e):o.current=e}function ic(o,e){let r=o.ref;return g(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?(0,Po.cloneElement)(o,{ref:t=>{nf(r,t),nf(e,t)}}):(0,Po.cloneElement)(o,{ref:e})}var Dr=class{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){let e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){let e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){let r=this.dragPreview,t=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(t&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Oo(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Oo(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Sr({dragSource:(r,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,Bo(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,Bo(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}};var yr=class{get connectTarget(){return this.dropTarget}reconnect(){let e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();let r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Oo(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Sr({dropTarget:(r,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,Bo(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}};var ff=s(y(),1);function re(){let{dragDropManager:o}=(0,ff.useContext)(rr);return g(o!=null,"Expected drag drop context"),o}function sf(o,e){let r=re(),t=(0,lf.useMemo)(()=>new Dr(r.getBackend()),[r]);return Y(()=>(t.dragSourceOptions=o||null,t.reconnect(),()=>t.disconnectDragSource()),[t,o]),Y(()=>(t.dragPreviewOptions=e||null,t.reconnect(),()=>t.disconnectDragPreview()),[t,e]),t}var cf=s(y(),1);function df(){let o=re();return(0,cf.useMemo)(()=>new hr(o),[o])}var Fr=s(y(),1);var vr=class{beginDrag(){let e=this.spec,r=this.monitor,t=null;return typeof e.item=="object"?t=e.item:typeof e.item=="function"?t=e.item(r):t={},t??null}canDrag(){let e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){let t=this.spec,a=this.monitor,{isDragging:n}=t;return n?n(a):r===e.getSourceId()}endDrag(){let e=this.spec,r=this.monitor,t=this.connector,{end:a}=e;a&&a(r.getItem(),r),t.reconnect()}constructor(e,r,t){this.spec=e,this.monitor=r,this.connector=t}};function uf(o,e,r){let t=(0,Fr.useMemo)(()=>new vr(o,e,r),[e,r]);return(0,Fr.useEffect)(()=>{t.spec=o},[o]),t}var pf=s(y(),1);function mf(o){return(0,pf.useMemo)(()=>{let e=o.type;return g(e!=null,"spec.type must be defined"),e},[o])}function If(o,e,r){let t=re(),a=uf(o,e,r),n=mf(o);Y(function(){if(n!=null){let[l,c]=af(n,a,t);return e.receiveHandlerId(l),r.receiveHandlerId(l),c}},[t,e,r,a,n])}function xf(o,e){let r=gr(o,e);g(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");let t=df(),a=sf(r.options,r.previewOptions);return If(r,t,a),[xr(r.collect,t,a),of(a),rf(a)]}var gf=s(y(),1);function hf(o){return(0,gf.useMemo)(()=>o.hooks.dropTarget(),[o])}var Cf=s(y(),1);function Sf(o){let e=re(),r=(0,Cf.useMemo)(()=>new yr(e.getBackend()),[e]);return Y(()=>(r.dropTargetOptions=o||null,r.reconnect(),()=>r.disconnectDropTarget()),[o]),r}var Df=s(y(),1);function yf(){let o=re();return(0,Df.useMemo)(()=>new Cr(o),[o])}var vf=s(y(),1);function Ff(o){let{accept:e}=o;return(0,vf.useMemo)(()=>(g(o.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}var Or=s(y(),1);var br=class{canDrop(){let e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){let e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){let e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}};function bf(o,e){let r=(0,Or.useMemo)(()=>new br(o,e),[e]);return(0,Or.useEffect)(()=>{r.spec=o},[o]),r}function Of(o,e,r){let t=re(),a=bf(o,e),n=Ff(o);Y(function(){let[l,c]=tf(n,a,t);return e.receiveHandlerId(l),r.receiveHandlerId(l),c},[t,e,a,r,n.map(f=>f.toString()).join("|")])}function Bf(o,e){let r=gr(o,e),t=yf(),a=Sf(r.options);return Of(r,t,a),[xr(r.collect,t,a),hf(a)]}function wt(o){let e=null;return()=>(e==null&&(e=o()),e)}function Pf(o,e){return o.filter(r=>r!==e)}function wf(o,e){let r=new Set,t=n=>r.add(n);o.forEach(t),e.forEach(t);let a=[];return r.forEach(n=>a.push(n)),a}var Br=class{enter(e){let r=this.entered.length,t=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(e));return this.entered=wf(this.entered.filter(t),[e]),r===0&&this.entered.length>0}leave(e){let r=this.entered.length;return this.entered=Pf(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}};var Pr=class{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){let r={};Object.keys(this.config.exposeProperties).forEach(t=>{let a=this.config.exposeProperties[t];a!=null&&(r[t]={value:a(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}};var wo={};Ss(wo,{FILE:()=>Tt,HTML:()=>At,TEXT:()=>Rt,URL:()=>Lt});var Tt="__NATIVE_FILE__",Lt="__NATIVE_URL__",Rt="__NATIVE_TEXT__",At="__NATIVE_HTML__";function wr(o,e,r){let t=e.reduce((a,n)=>a||o.getData(n),"");return t??r}var Tr={[Tt]:{exposeProperties:{files:o=>Array.prototype.slice.call(o.files),items:o=>o.items,dataTransfer:o=>o},matchesTypes:["Files"]},[At]:{exposeProperties:{html:(o,e)=>wr(o,e,""),dataTransfer:o=>o},matchesTypes:["Html","text/html"]},[Lt]:{exposeProperties:{urls:(o,e)=>wr(o,e,"").split(`
`),dataTransfer:o=>o},matchesTypes:["Url","text/uri-list"]},[Rt]:{exposeProperties:{text:(o,e)=>wr(o,e,""),dataTransfer:o=>o},matchesTypes:["Text","text/plain"]}};function Tf(o,e){let r=Tr[o];if(!r)throw new Error(`native type ${o} has no configuration`);let t=new Pr(r);return t.loadDataTransfer(e),t}function Lr(o){if(!o)return null;let e=Array.prototype.slice.call(o.types||[]);return Object.keys(Tr).filter(r=>{let t=Tr[r];return t?.matchesTypes?t.matchesTypes.some(a=>e.indexOf(a)>-1):!1})[0]||null}var Lf=wt(()=>/firefox/i.test(navigator.userAgent)),Mt=wt(()=>Boolean(window.safari));var To=class{interpolate(e){let{xs:r,ys:t,c1s:a,c2s:n,c3s:f}=this,l=r.length-1;if(e===r[l])return t[l];let c=0,i=f.length-1,u;for(;c<=i;){u=Math.floor(.5*(c+i));let h=r[u];if(h<e)c=u+1;else if(h>e)i=u-1;else return t[u]}l=Math.max(0,i);let p=e-r[l],I=p*p;return t[l]+a[l]*p+n[l]*I+f[l]*p*I}constructor(e,r){let{length:t}=e,a=[];for(let m=0;m<t;m++)a.push(m);a.sort((m,C)=>e[m]<e[C]?-1:1);let n=[],f=[],l=[],c,i;for(let m=0;m<t-1;m++)c=e[m+1]-e[m],i=r[m+1]-r[m],f.push(c),n.push(i),l.push(i/c);let u=[l[0]];for(let m=0;m<f.length-1;m++){let C=l[m],F=l[m+1];if(C*F<=0)u.push(0);else{c=f[m];let S=f[m+1],b=c+S;u.push(3*b/((b+S)/C+(b+c)/F))}}u.push(l[l.length-1]);let p=[],I=[],h;for(let m=0;m<u.length-1;m++){h=l[m];let C=u[m],F=1/f[m],S=C+u[m+1]-h-h;p.push((h-C-S)*F),I.push(S*F*F)}this.xs=e,this.ys=r,this.c1s=u,this.c2s=p,this.c3s=I}};var pc=1;function kt(o){let e=o.nodeType===pc?o:o.parentElement;if(!e)return null;let{top:r,left:t}=e.getBoundingClientRect();return{x:t,y:r}}function Lo(o){return{x:o.clientX,y:o.clientY}}function mc(o){var e;return o.nodeName==="IMG"&&(Lf()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(o)))}function Ic(o,e,r,t){let a=o?e.width:r,n=o?e.height:t;return Mt()&&o&&(n/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:n}}function Rf(o,e,r,t,a){let n=mc(e),l=kt(n?o:e),c={x:r.x-l.x,y:r.y-l.y},{offsetWidth:i,offsetHeight:u}=o,{anchorX:p,anchorY:I}=t,{dragPreviewWidth:h,dragPreviewHeight:m}=Ic(n,e,i,u),C=()=>{let R=new To([0,.5,1],[c.y,c.y/u*m,c.y+m-u]).interpolate(I);return Mt()&&n&&(R+=(window.devicePixelRatio-1)*m),R},F=()=>new To([0,.5,1],[c.x,c.x/i*h,c.x+h-i]).interpolate(p),{offsetX:S,offsetY:b}=a,D=S===0||S,P=b===0||b;return{x:D?S:F(),y:P?b:C()}}var Rr=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}};function xc(o,e,r){return e in o?Object.defineProperty(o,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[e]=r,o}function Af(o){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},t=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),t.forEach(function(a){xc(o,a,r[a])})}return o}var Ar=class{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){let e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){let e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,t){return this.sourcePreviewNodeOptions.set(e,t),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,t){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,t);let a=f=>this.handleDragStart(f,e),n=f=>this.handleSelectStart(f);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",a),r.addEventListener("selectstart",n),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",a),r.removeEventListener("selectstart",n),r.setAttribute("draggable","false")}}connectDropTarget(e,r){let t=f=>this.handleDragEnter(f,e),a=f=>this.handleDragOver(f,e),n=f=>this.handleDrop(f,e);return r.addEventListener("dragenter",t),r.addEventListener("dragover",a),r.addEventListener("drop",n),()=>{r.removeEventListener("dragenter",t),r.removeEventListener("dragover",a),r.removeEventListener("drop",n)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){let e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return Af({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){let e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return Af({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){let e=this.monitor.getItemType();return Object.keys(wo).some(r=>wo[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Tf(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;let r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var t;return(t=this.rootElement)===null||t===void 0?void 0:t.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,t){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{let n=this.sourceNodes.get(a);return n&&kt(n)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>Boolean(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{let a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;let{dragStartSourceIds:n}=this;this.dragStartSourceIds=null;let f=Lo(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(n||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:f});let{dataTransfer:l}=a,c=Lr(l);if(this.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){let u=this.monitor.getSourceId(),p=this.sourceNodes.get(u),I=this.sourcePreviewNodes.get(u)||p;if(I){let{anchorX:h,anchorY:m,offsetX:C,offsetY:F}=this.getCurrentSourcePreviewNodeOptions(),D=Rf(p,I,f,{anchorX:h,anchorY:m},{offsetX:C,offsetY:F});l.setDragImage(I,D.x,D.y)}}try{l?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);let{captureDraggingState:i}=this.getCurrentSourcePreviewNodeOptions();i?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(l&&!l.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var n;(n=this.currentNativeSource)===null||n===void 0||n.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;let{dataTransfer:l}=a,c=Lr(l);c&&this.beginDragNativeItem(c,l)},this.handleTopDragEnter=a=>{let{dragEnterTargetIds:n}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,n.length>0&&this.actions.hover(n,{clientOffset:Lo(a)}),n.some(l=>this.monitor.canDropOnTarget(l))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var n;(n=this.currentNativeSource)===null||n===void 0||n.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{let{dragOverTargetIds:n}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=Lo(a),this.scheduleHover(n),(n||[]).some(l=>this.monitor.canDropOnTarget(l))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var n;a.preventDefault(),(n=this.currentNativeSource)===null||n===void 0||n.loadDataTransfer(a.dataTransfer)}else Lr(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{let{dropTargetIds:n}=this;this.dropTargetIds=[],this.actions.hover(n,{clientOffset:Lo(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{let n=a.target;typeof n.dragDrop=="function"&&(n.tagName==="INPUT"||n.tagName==="SELECT"||n.tagName==="TEXTAREA"||n.isContentEditable||(a.preventDefault(),n.dragDrop()))},this.options=new Rr(r,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Br(this.isNodeInDocument)}};var Mf=function(e,r,t){return new Ar(e,r,t)};function kf(o){let{selectable:e,draggable:r,locked:t}=o??{},a=o?.showIcons===void 0?!0:o.showIcons;return{draggable:!!r,selectable:!!e,locked:t??[],showIcons:a}}var Ro=s(y(),1);function Ef(o,e,r,t){let{isSelected:a,onSelect:n}=e??{},f=(0,Ro.useCallback)(u=>()=>{u&&n?.(u)},[n]),l=(0,Ro.useCallback)(()=>{n?.(o.filter(u=>!!u.path).map(u=>u.path??""))},[n,o]),c=(0,Ro.useCallback)(u=>p=>{r?.(u,p)},[r]),i=(0,Ro.useCallback)((u,p)=>{t?.(u,p)},[t]);return{change:c,drop:i,isSelected:a,select:f,selectAll:l}}var Uf=s(Se(),1);var Nf=s(y(),1);function gc(o){return o.map(e=>({path:e}))}function Hf(o,e,r,t){let a=(0,Nf.useRef)(null),[{isDragging:n},f]=xf(()=>({type:o,item:()=>r?.selected&&r?.selected?.length>0?gc(r.selected):[e],canDrag:()=>!!e.drag,collect:u=>({isDragging:!!u.isDragging()})}),[r]),[{isOver:l,canDrop:c},i]=Bf(()=>({accept:o,canDrop:u=>!!e.drop&&!u.find(p=>p.path===e.path),drop:u=>{e.path&&t?.(u.map(p=>p.path??""),e.path)},collect:u=>({isOver:!!u.isOver(),canDrop:!!u.canDrop()})}));return i(f(a)),{ref:a,isDragging:n,isOver:c&&l}}function qf(o){return{path:o.path,drag:!o.draft,drop:o.acceptDrop}}var Je={drag:"hYjIl",drop:"VSAdj",locked:"uCQKv"};var Et=s(d(),1);function zf({selection:o,onDrop:e,...r}){let{item:t}=r,{ref:a,isDragging:n,isOver:f}=Hf("file",qf(t),o,e),l=r.component;return(0,Et.jsx)(w.Tr,{ref:a,className:(0,Uf.default)(r.locked&&Je.locked,n&&Je.drag,f&&Je.drop),children:(0,Et.jsx)(l,{...r})})}var _f=s(Se(),1);var Nt=s(d(),1);function Wf(o){let e=o.component;return(0,Nt.jsx)(w.Tr,{className:(0,_f.default)(o.locked&&Je.locked),style:{userDrag:"none",WebkitUserDrag:"none"},children:(0,Nt.jsx)(e,{...o})})}var Ht=s(d(),1);function Gf({draggable:o,...e}){return o?(0,Ht.jsx)(zf,{...e}):(0,Ht.jsx)(Wf,{...e})}var Vf={table:"u7447",thead:"VgQ3Y",tr:"WpJ8d",td:"wRrzH",th:"y7gsS"};var eo=s(d(),1);function jf({data:o,selection:e,component:r,config:t,children:a,handlers:n}){let{selectable:f,draggable:l,locked:c}=t??{},i=t?.showIcons===void 0?!0:t.showIcons,u=p=>!!(c?.includes(p.path??"")||c?.includes(p.text??""));return(0,eo.jsxs)(w,{highlightOnHover:!0,stickyHeader:!0,classNames:Vf,horizontalSpacing:"0",miw:800,stickyHeaderOffset:60,verticalSpacing:"sm",children:[a,(0,eo.jsx)(w.Tbody,{children:o.map(({key:p,...I})=>(0,eo.jsx)(Gf,{checked:n.isSelected?.(p),component:r,draggable:l,locked:u(I),selection:e,item:{...I,locked:u(I),icon:!I.icon&&u(I)?(0,eo.jsx)(ia,{color:"gray",size:"xs"}):I.icon,selectable:f,showIcon:i},onDrop:n.drop,onToggle:n.select?.(I.path),onSave:n.change({key:p,...I})},p))})]})}var Xf=s(Se(),1);var Ao={container:"OyLcf",selected:"BcIMD",actions:"_7OG-U"};var Z=s(d(),1);function Kf({selected:o,selection:e,total:r,selectionActions:t,onSelectAll:a}){return(0,Z.jsx)(w.Thead,{children:(0,Z.jsxs)(w.Tr,{children:[(0,Z.jsx)(w.Th,{w:"40px",children:(0,Z.jsx)(Qo,{checked:o&&e.length===r,indeterminate:o&&e.length!==r,onChange:a})}),(0,Z.jsx)(w.Th,{colSpan:5,children:(0,Z.jsxs)("div",{className:Ao.container,children:[(0,Z.jsx)("span",{className:(0,Xf.default)(Ao.selected,e&&e.length<1&&Ao.empty),children:o&&(0,Z.jsxs)(Z.Fragment,{children:[e.length," selected"]})}),(0,Z.jsx)("div",{className:Ao.actions,children:t})]})})]})})}var Mr=s(d(),1);function kr({data:o,component:e,config:r,selection:t,selectionActions:a,onChange:n,onDrop:f}){let l=kf(r),c=Ef(o,t,n,f),{selected:i,empty:u}=t??{},p=(0,Mr.jsx)(jf,{component:e,config:l,data:o,handlers:c,selection:t,children:i&&(0,Mr.jsx)(Kf,{selected:!u,selection:i,selectionActions:a,total:o.length,onSelectAll:c.selectAll})});return l.draggable?(0,Mr.jsx)(Xn,{backend:Mf,children:p}):p}var Me=s(y(),1);var Q=s(y(),1);function Yf(o,e,r){return r.indexOf(o)===e}function Zf(o){let[e,r]=(0,Q.useState)(o),t=(0,Q.useMemo)(()=>e.length<1,[e]),a=(0,Q.useCallback)(p=>{r(p([...e]))},[e]),n=(0,Q.useCallback)(p=>{a(I=>(I.splice(I.indexOf(p),1),I))},[a]),f=(0,Q.useCallback)(p=>{a(I=>(I.push(p),I))},[a]),l=(0,Q.useCallback)(p=>{e.includes(p[0])?r(e.filter(I=>!p.includes(I))):r([...e,...p].filter(Yf))},[e]),c=(0,Q.useCallback)(p=>{Array.isArray(p)?l(p):e.includes(p)?n(p):f(p)},[e,n,f,l]),i=(0,Q.useCallback)(p=>!!e?.includes(p),[e]),u=(0,Q.useCallback)(()=>{r([])},[]);return(0,Q.useMemo)(()=>({selected:e,empty:t,onSelect:c,isSelected:i,reset:u,set:r}),[e,t,c,i,u])}var Qf=s(y(),1);var oo=s(d(),1);function Er({item:o,size:e}){let{edit:r}=U(),t=(0,Qf.useCallback)(()=>{r(o)},[r,o]);return(0,oo.jsx)(oo.Fragment,{children:(0,oo.jsx)(J,{size:e??"lg",variant:"subtle",onClick:t,children:(0,oo.jsx)(at,{size:20})})})}var Re=s(d(),1);function $f({dir:o}){return(0,Re.jsxs)(Re.Fragment,{children:[(0,Re.jsx)(Er,{item:o,size:"md"}),(0,Re.jsx)(Xe,{files:[o.path],size:"md"})]})}var ro=s(d(),1);function Jf({file:o,size:e}){let{top:r}=M();return(0,ro.jsx)(ro.Fragment,{children:(0,ro.jsx)(J,{size:e??"lg",variant:"subtle",onClick:()=>{r&&(window.location.href=`/api/download?hash=${r.hash}&file=${$o(r,o.path)}`)},children:(0,ro.jsx)(rt,{size:20})})})}var be=s(d(),1);function el({file:o}){return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Er,{item:o,size:"md"}),(0,be.jsx)(Jf,{file:o,size:"md"}),(0,be.jsx)(Xe,{files:[o.path],size:"md"})]})}var to=s(d(),1);function ol({prefix:o,postfix:e,text:r,styles:t}){return(0,to.jsxs)("li",{children:[o&&(0,to.jsx)("span",{className:t.prefix,children:o}),(0,to.jsx)("span",{className:t.text,children:r}),e&&(0,to.jsx)("span",{className:t.postfix,children:e})]})}var qt={container:"oPZRi",prefix:"KJqnO",postfix:"tk45f"};var Nr=s(d(),1),hc=16;function Hr({items:o}){return(0,Nr.jsx)("ul",{className:qt.container,children:o.map(e=>{if(!e)return null;let r=e.icon;return(0,Nr.jsx)(ol,{postfix:r&&(0,Nr.jsx)(r,{size:hc}),styles:qt,text:e.content},e.key)})})}var Cc="array",Sc="bit",rl="bits",Dc="byte",tl="bytes",ao="",yc="exponent",vc="function",al="iec",Fc="Invalid number",bc="Invalid rounding method",Ut="jedec",Oc="object",nl=".",Bc="round",Pc="s",wc="si",Tc="kbit",Lc="kB",Rc=" ",Ac="string",Mc="0",zt={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function Mo(o,{bits:e=!1,pad:r=!1,base:t=-1,round:a=2,locale:n=ao,localeOptions:f={},separator:l=ao,spacer:c=Rc,symbols:i={},standard:u=ao,output:p=Ac,fullform:I=!1,fullforms:h=[],exponent:m=-1,roundingMethod:C=Bc,precision:F=0}={}){let S=m,b=Number(o),D=[],P=0,G=ao;u===wc?(t=10,u=Ut):u===al||u===Ut?t=2:t===2?u=al:(t=10,u=Ut);let R=t===10?1e3:1024,$=I===!0,V=b<0,j=Math[C];if(typeof o!="bigint"&&isNaN(o))throw new TypeError(Fc);if(typeof j!==vc)throw new TypeError(bc);if(V&&(b=-b),(S===-1||isNaN(S))&&(S=Math.floor(Math.log(b)/Math.log(R)),S<0&&(S=0)),S>8&&(F>0&&(F+=8-S),S=8),p===yc)return S;if(b===0)D[0]=0,G=D[1]=zt.symbol[u][e?rl:tl][S];else{P=b/(t===2?Math.pow(2,S*10):Math.pow(1e3,S)),e&&(P=P*8,P>=R&&S<8&&(P=P/R,S++));let A=Math.pow(10,S>0?a:0);D[0]=j(P*A)/A,D[0]===R&&S<8&&m===-1&&(D[0]=1,S++),G=D[1]=t===10&&S===1?e?Tc:Lc:zt.symbol[u][e?rl:tl][S]}if(V&&(D[0]=-D[0]),F>0&&(D[0]=D[0].toPrecision(F)),D[1]=i[D[1]]||D[1],n===!0?D[0]=D[0].toLocaleString():n.length>0?D[0]=D[0].toLocaleString(n,f):l.length>0&&(D[0]=D[0].toString().replace(nl,l)),r&&Number.isInteger(D[0])===!1&&a>0){let A=l||nl,fe=D[0].toString().split(A),de=fe[1]||ao,T=de.length,q=a-T;D[0]=`${fe[0]}${A}${de.padEnd(T+q,Mc)}`}return $&&(D[1]=h[S]?h[S]:zt.fullform[u][S]+(e?Sc:Dc)+(D[0]===1?ao:Pc)),p===Cc?D:p===Oc?{value:D[0],symbol:D[1],exponent:S,unit:G}:D.join(c)}var fl={container:"VZst4"};var sl=s(d(),1);function ll({path:o}){let e=o.split(".").pop();return e?(0,sl.jsx)("span",{className:fl.container,children:e}):null}var dl=s(d(),1);function cl(o){let e=[];return e.push({key:"size",content:Mo(o.size)}),e.push({key:"ext",content:(0,dl.jsx)(ll,{path:o.filename})}),e}var il=s(d(),1);function ul({data:o}){return(0,il.jsx)(Hr,{items:cl(o)})}function pl(o){let e=[];return e.push(o.folders.length>0&&{key:"folders",icon:we,content:o.folders.length}),e.push(o.files.length>0&&{key:"files",icon:lt,content:o.files.length}),e}var ml=s(d(),1);function qr({data:o}){return(0,ml.jsx)(Hr,{items:pl(o)})}var Ae=s(d(),1);function kc(o){let e=[];return o&&o.forEach(r=>{e.push({key:r.path,path:r.path,text:r.filename,draft:r.draft,info:(0,Ae.jsx)(ul,{data:r}),actions:(0,Ae.jsx)(el,{file:r})})}),e}function Ec(o,e,r){let t=[];return o&&e&&(r&&t.push({key:r,path:r,acceptDrop:!0,draft:!1,text:"..",icon:(0,Ae.jsx)(tt,{}),link:r===e.path?`/view/${e.hash}`:`/view/${e.hash}${$o(e,r)}`}),o.forEach(a=>{t.push({key:a.path,path:a.path,acceptDrop:!0,draft:a.draft,text:a.filename,link:`/view/${e.hash}/${a.relative}`,info:(0,Ae.jsx)(qr,{data:a}),icon:(0,Ae.jsx)(we,{}),actions:(0,Ae.jsx)($f,{dir:a})})})),t}function _t(o,e){let r=[],t=Ec(e?.folders,o,e?.hash?void 0:e?.dir),a=kc(e?.files);return t.length>0&&r.push(...t),a.length>0&&r.push(...a),r}function Il(){let o=Zf([]),{set:e}=o,{top:r}=M(),{data:t}=U(),[a,n]=(0,Me.useState)(_t(r,t));return(0,Me.useEffect)(()=>{n(_t(r,t))},[r,t]),(0,Me.useEffect)(()=>{e([])},[t,e]),(0,Me.useMemo)(()=>({list:a,selection:o}),[a,o])}var Wt=s(d(),1);function xl(){let{list:o,selection:e}=Il(),{locked:r}=M(),t=Ge();return(0,Wt.jsx)(kr,{component:or,data:o,selection:e,selectionActions:(0,Wt.jsx)(ja,{selection:e}),config:{draggable:!0,selectable:!0,locked:r},onChange:t.rename,onDrop:t.move})}var Gt=s(d(),1);function gl(){return(0,Gt.jsx)("div",{children:(0,Gt.jsx)(xl,{})})}var Cl=s(d(),1);function hl(){let{data:o}=U();return o?(0,Cl.jsx)(gl,{}):null}var no=s(y(),1);var Sl=s(d(),1);function Vt(o){let e=[];return o&&o.forEach(r=>{e.push({key:r.hash,text:`${r.path}`,link:`/view/${r.hash}`,info:(0,Sl.jsx)(qr,{data:r})})}),e}function Dl(){let{paths:o}=M(),[e,r]=(0,no.useState)(Vt(o));return(0,no.useEffect)(()=>{r(Vt(o))},[o]),(0,no.useMemo)(()=>({list:e}),[e])}var vl=s(d(),1);function yl(){let{list:o}=Dl();return(0,vl.jsx)(kr,{component:or,config:{showIcons:!1},data:o})}var jt=s(d(),1);function Fl(){return(0,jt.jsx)("div",{children:(0,jt.jsx)(yl,{})})}var Yr=s(y(),1);var fo=s(d(),1);function bl(){return(0,fo.jsx)(fo.Fragment,{children:(0,fo.jsx)(J,{c:"primary.0",size:"lg",onClick:()=>{window.location.reload()},children:(0,fo.jsx)(nt,{size:"20"})})})}var Ne=s(d(),1);var v=s(y(),1),B=s(Ds(),1);var Nc=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function lo(o,e){let r=Hc(o);if(typeof r.path!="string"){let{webkitRelativePath:t}=o;Object.defineProperty(r,"path",{value:typeof e=="string"?e:typeof t=="string"&&t.length>0?t:o.name,writable:!1,configurable:!1,enumerable:!0})}return r}function Hc(o){let{name:e}=o;if(e&&e.lastIndexOf(".")!==-1&&!o.type){let t=e.split(".").pop().toLowerCase(),a=Nc.get(t);a&&Object.defineProperty(o,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return o}var so=(o,e,r)=>new Promise((t,a)=>{var n=c=>{try{l(r.next(c))}catch(i){a(i)}},f=c=>{try{l(r.throw(c))}catch(i){a(i)}},l=c=>c.done?t(c.value):Promise.resolve(c.value).then(n,f);l((r=r.apply(o,e)).next())}),qc=[".DS_Store","Thumbs.db"];function Pl(o){return so(this,null,function*(){return Ur(o)&&Uc(o.dataTransfer)?Gc(o.dataTransfer,o.type):zc(o)?_c(o):Array.isArray(o)&&o.every(e=>"getFile"in e&&typeof e.getFile=="function")?Wc(o):[]})}function Uc(o){return Ur(o)}function zc(o){return Ur(o)&&Ur(o.target)}function Ur(o){return typeof o=="object"&&o!==null}function _c(o){return Xt(o.target.files).map(e=>lo(e))}function Wc(o){return so(this,null,function*(){return(yield Promise.all(o.map(r=>r.getFile()))).map(r=>lo(r))})}function Gc(o,e){return so(this,null,function*(){if(o.items){let r=Xt(o.items).filter(a=>a.kind==="file");if(e!=="drop")return r;let t=yield Promise.all(r.map(Vc));return Ol(wl(t))}return Ol(Xt(o.files).map(r=>lo(r)))})}function Ol(o){return o.filter(e=>qc.indexOf(e.name)===-1)}function Xt(o){if(o===null)return[];let e=[];for(let r=0;r<o.length;r++){let t=o[r];e.push(t)}return e}function Vc(o){if(typeof o.webkitGetAsEntry!="function")return Bl(o);let e=o.webkitGetAsEntry();return e&&e.isDirectory?Tl(e):Bl(o)}function wl(o){return o.reduce((e,r)=>[...e,...Array.isArray(r)?wl(r):[r]],[])}function Bl(o){let e=o.getAsFile();if(!e)return Promise.reject(`${o} is not a File`);let r=lo(e);return Promise.resolve(r)}function jc(o){return so(this,null,function*(){return o.isDirectory?Tl(o):Xc(o)})}function Tl(o){let e=o.createReader();return new Promise((r,t)=>{let a=[];function n(){e.readEntries(f=>so(this,null,function*(){if(f.length){let l=Promise.all(f.map(jc));a.push(l),n()}else try{let l=yield Promise.all(a);r(l)}catch(l){t(l)}}),f=>{t(f)})}n()})}function Xc(o){return so(this,null,function*(){return new Promise((e,r)=>{o.file(t=>{let a=lo(t,o.fullPath);e(a)},t=>{r(t)})})})}function Ll(o,e){if(o&&e){let r=Array.isArray(e)?e:e.split(","),t=o.name||"",a=(o.type||"").toLowerCase(),n=a.replace(/\/.*$/,"");return r.some(f=>{let l=f.trim().toLowerCase();return l.charAt(0)==="."?t.toLowerCase().endsWith(l):l.endsWith("/*")?n===l.replace(/\/.*$/,""):a===l})}return!0}var Kc=Object.defineProperty,Yc=Object.defineProperties,Zc=Object.getOwnPropertyDescriptors,Rl=Object.getOwnPropertySymbols,Qc=Object.prototype.hasOwnProperty,$c=Object.prototype.propertyIsEnumerable,Al=(o,e,r)=>e in o?Kc(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,Jc=(o,e)=>{for(var r in e||(e={}))Qc.call(e,r)&&Al(o,r,e[r]);if(Rl)for(var r of Rl(e))$c.call(e,r)&&Al(o,r,e[r]);return o},ed=(o,e)=>Yc(o,Zc(e)),od="file-invalid-type",rd="file-too-large",td="file-too-small",ad="too-many-files";var nd=o=>{o=Array.isArray(o)&&o.length===1?o[0]:o;let e=Array.isArray(o)?`one of ${o.join(", ")}`:o;return{code:od,message:`File type must be ${e}`}},Ml=o=>({code:rd,message:`File is larger than ${o} ${o===1?"byte":"bytes"}`}),kl=o=>({code:td,message:`File is smaller than ${o} ${o===1?"byte":"bytes"}`}),El={code:ad,message:"Too many files"};function Kt(o,e){let r=o.type==="application/x-moz-file"||Ll(o,e);return[r,r?null:nd(e)]}function Yt(o,e,r){if(ke(o.size))if(ke(e)&&ke(r)){if(o.size>r)return[!1,Ml(r)];if(o.size<e)return[!1,kl(e)]}else{if(ke(e)&&o.size<e)return[!1,kl(e)];if(ke(r)&&o.size>r)return[!1,Ml(r)]}return[!0,null]}function ke(o){return o!=null}function Nl({files:o,accept:e,minSize:r,maxSize:t,multiple:a,maxFiles:n,validator:f}){return!a&&o.length>1||a&&n>=1&&o.length>n?!1:o.every(l=>{let[c]=Kt(l,e),[i]=Yt(l,r,t),u=f?f(l):null;return c&&i&&!u})}function ko(o){return typeof o.isPropagationStopped=="function"?o.isPropagationStopped():typeof o.cancelBubble<"u"?o.cancelBubble:!1}function Eo(o){return o.dataTransfer?Array.prototype.some.call(o.dataTransfer.types,e=>e==="Files"||e==="application/x-moz-file"):!!o.target&&!!o.target.files}function Zt(o){o.preventDefault()}function fd(o){return o.indexOf("MSIE")!==-1||o.indexOf("Trident/")!==-1}function ld(o){return o.indexOf("Edge/")!==-1}function Hl(o=window.navigator.userAgent){return fd(o)||ld(o)}function te(...o){return(e,...r)=>o.some(t=>(!ko(e)&&t&&t(e,...r),ko(e)))}function ql(){return"showOpenFilePicker"in window}function Ul(o){return ke(o)?[{description:"Files",accept:Object.entries(o).filter(([r,t])=>{let a=!0;return Gl(r)||(console.warn(`Skipped "${r}" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.`),a=!1),(!Array.isArray(t)||!t.every(Vl))&&(console.warn(`Skipped "${r}" because an invalid file extension was provided.`),a=!1),a}).reduce((r,[t,a])=>ed(Jc({},r),{[t]:a}),{})}]:o}function zl(o){if(ke(o))return Object.entries(o).reduce((e,[r,t])=>[...e,r,...t],[]).filter(e=>Gl(e)||Vl(e)).join(",")}function _l(o){return o instanceof DOMException&&(o.name==="AbortError"||o.code===o.ABORT_ERR)}function Wl(o){return o instanceof DOMException&&(o.name==="SecurityError"||o.code===o.SECURITY_ERR)}function Gl(o){return o==="audio/*"||o==="video/*"||o==="image/*"||o==="text/*"||/\w+\/[-+.\w]+/g.test(o)}function Vl(o){return/^.*\.[\w]+$/.test(o)}var sd=Object.defineProperty,cd=Object.defineProperties,dd=Object.getOwnPropertyDescriptors,zr=Object.getOwnPropertySymbols,Kl=Object.prototype.hasOwnProperty,Yl=Object.prototype.propertyIsEnumerable,jl=(o,e,r)=>e in o?sd(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,W=(o,e)=>{for(var r in e||(e={}))Kl.call(e,r)&&jl(o,r,e[r]);if(zr)for(var r of zr(e))Yl.call(e,r)&&jl(o,r,e[r]);return o},Oe=(o,e)=>cd(o,dd(e)),_r=(o,e)=>{var r={};for(var t in o)Kl.call(o,t)&&e.indexOf(t)<0&&(r[t]=o[t]);if(o!=null&&zr)for(var t of zr(o))e.indexOf(t)<0&&Yl.call(o,t)&&(r[t]=o[t]);return r},$t=(0,v.forwardRef)((o,e)=>{var r=o,{children:t}=r,a=_r(r,["children"]);let n=Jt(a),{open:f}=n,l=_r(n,["open"]);return(0,v.useImperativeHandle)(e,()=>({open:f}),[f]),v.default.createElement(v.Fragment,null,t(Oe(W({},l),{open:f})))});$t.displayName="Dropzone";var Zl={disabled:!1,getFilesFromEvent:Pl,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};$t.defaultProps=Zl;$t.propTypes={children:B.default.func,accept:B.default.objectOf(B.default.arrayOf(B.default.string)),multiple:B.default.bool,preventDropOnDocument:B.default.bool,noClick:B.default.bool,noKeyboard:B.default.bool,noDrag:B.default.bool,noDragEventsBubbling:B.default.bool,minSize:B.default.number,maxSize:B.default.number,maxFiles:B.default.number,disabled:B.default.bool,getFilesFromEvent:B.default.func,onFileDialogCancel:B.default.func,onFileDialogOpen:B.default.func,useFsAccessApi:B.default.bool,autoFocus:B.default.bool,onDragEnter:B.default.func,onDragLeave:B.default.func,onDragOver:B.default.func,onDrop:B.default.func,onDropAccepted:B.default.func,onDropRejected:B.default.func,onError:B.default.func,validator:B.default.func};var Qt={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Jt(o={}){let{accept:e,disabled:r,getFilesFromEvent:t,maxSize:a,minSize:n,multiple:f,maxFiles:l,onDragEnter:c,onDragLeave:i,onDragOver:u,onDrop:p,onDropAccepted:I,onDropRejected:h,onFileDialogCancel:m,onFileDialogOpen:C,useFsAccessApi:F,autoFocus:S,preventDropOnDocument:b,noClick:D,noKeyboard:P,noDrag:G,noDragEventsBubbling:R,onError:$,validator:V}=W(W({},Zl),o),j=(0,v.useMemo)(()=>zl(e),[e]),A=(0,v.useMemo)(()=>Ul(e),[e]),fe=(0,v.useMemo)(()=>typeof C=="function"?C:Xl,[C]),de=(0,v.useMemo)(()=>typeof m=="function"?m:Xl,[m]),T=(0,v.useRef)(null),q=(0,v.useRef)(null),[Uo,z]=(0,v.useReducer)(ud,Qt),{isFocused:Zr,isFileDialogActive:co}=Uo,He=(0,v.useRef)(typeof window<"u"&&window.isSecureContext&&F&&ql()),Qr=()=>{!He.current&&co&&setTimeout(()=>{if(q.current){let{files:x}=q.current;x.length||(z({type:"closeDialog"}),de())}},300)};(0,v.useEffect)(()=>(window.addEventListener("focus",Qr,!1),()=>{window.removeEventListener("focus",Qr,!1)}),[q,co,de,He]);let Be=(0,v.useRef)([]),zo=x=>{T.current&&T.current.contains(x.target)||(x.preventDefault(),Be.current=[])};(0,v.useEffect)(()=>(b&&(document.addEventListener("dragover",Zt,!1),document.addEventListener("drop",zo,!1)),()=>{b&&(document.removeEventListener("dragover",Zt),document.removeEventListener("drop",zo))}),[T,b]),(0,v.useEffect)(()=>(!r&&S&&T.current&&T.current.focus(),()=>{}),[T,S,r]);let ue=(0,v.useCallback)(x=>{$?$(x):console.error(x)},[$]),_o=(0,v.useCallback)(x=>{x.preventDefault(),x.persist(),Xo(x),Be.current=[...Be.current,x.target],Eo(x)&&Promise.resolve(t(x)).then(O=>{if(ko(x)&&!R)return;let L=O.length,H=L>0&&Nl({files:O,accept:j,minSize:n,maxSize:a,multiple:f,maxFiles:l,validator:V}),X=L>0&&!H;z({isDragAccept:H,isDragReject:X,isDragActive:!0,type:"setDraggedFiles"}),c&&c(x)}).catch(O=>ue(O))},[t,c,ue,R,j,n,a,f,l,V]),Wo=(0,v.useCallback)(x=>{x.preventDefault(),x.persist(),Xo(x);let O=Eo(x);if(O&&x.dataTransfer)try{x.dataTransfer.dropEffect="copy"}catch{}return O&&u&&u(x),!1},[u,R]),Go=(0,v.useCallback)(x=>{x.preventDefault(),x.persist(),Xo(x);let O=Be.current.filter(H=>T.current&&T.current.contains(H)),L=O.indexOf(x.target);L!==-1&&O.splice(L,1),Be.current=O,!(O.length>0)&&(z({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Eo(x)&&i&&i(x))},[T,i,R]),Pe=(0,v.useCallback)((x,O)=>{let L=[],H=[];x.forEach(X=>{let[po,mo]=Kt(X,j),[$r,Jr]=Yt(X,n,a),Io=V?V(X):null;if(po&&$r&&!Io)L.push(X);else{let xo=[mo,Jr];Io&&(xo=xo.concat(Io)),H.push({file:X,errors:xo.filter(et=>et)})}}),(!f&&L.length>1||f&&l>=1&&L.length>l)&&(L.forEach(X=>{H.push({file:X,errors:[El]})}),L.splice(0)),z({acceptedFiles:L,fileRejections:H,type:"setFiles"}),p&&p(L,H,O),H.length>0&&h&&h(H,O),L.length>0&&I&&I(L,O)},[z,f,j,n,a,l,p,I,h,V]),qe=(0,v.useCallback)(x=>{x.preventDefault(),x.persist(),Xo(x),Be.current=[],Eo(x)&&Promise.resolve(t(x)).then(O=>{ko(x)&&!R||Pe(O,x)}).catch(O=>ue(O)),z({type:"reset"})},[t,Pe,ue,R]),xe=(0,v.useCallback)(()=>{if(He.current){z({type:"openDialog"}),fe();let x={multiple:f,types:A};window.showOpenFilePicker(x).then(O=>t(O)).then(O=>{Pe(O,null),z({type:"closeDialog"})}).catch(O=>{_l(O)?(de(O),z({type:"closeDialog"})):Wl(O)?(He.current=!1,q.current?(q.current.value=null,q.current.click()):ue(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ue(O)});return}q.current&&(z({type:"openDialog"}),fe(),q.current.value=null,q.current.click())},[z,fe,de,F,Pe,ue,A,f]),Ue=(0,v.useCallback)(x=>{!T.current||!T.current.isEqualNode(x.target)||(x.key===" "||x.key==="Enter"||x.keyCode===32||x.keyCode===13)&&(x.preventDefault(),xe())},[T,xe]),ze=(0,v.useCallback)(()=>{z({type:"focus"})},[]),Vo=(0,v.useCallback)(()=>{z({type:"blur"})},[]),uo=(0,v.useCallback)(()=>{D||(Hl()?setTimeout(xe,0):xe())},[D,xe]),ge=x=>r?null:x,io=x=>P?null:ge(x),jo=x=>G?null:ge(x),Xo=x=>{R&&x.stopPropagation()},xs=(0,v.useMemo)(()=>(x={})=>{var O=x,{refKey:L="ref",role:H,onKeyDown:X,onFocus:po,onBlur:mo,onClick:$r,onDragEnter:Jr,onDragOver:Io,onDragLeave:xo,onDrop:et}=O,Cs=_r(O,["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return W(W({onKeyDown:io(te(X,Ue)),onFocus:io(te(po,ze)),onBlur:io(te(mo,Vo)),onClick:ge(te($r,uo)),onDragEnter:jo(te(Jr,_o)),onDragOver:jo(te(Io,Wo)),onDragLeave:jo(te(xo,Go)),onDrop:jo(te(et,qe)),role:typeof H=="string"&&H!==""?H:"presentation",[L]:T},!r&&!P?{tabIndex:0}:{}),Cs)},[T,Ue,ze,Vo,uo,_o,Wo,Go,qe,P,G,r]),gs=(0,v.useCallback)(x=>{x.stopPropagation()},[]),hs=(0,v.useMemo)(()=>(x={})=>{var O=x,{refKey:L="ref",onChange:H,onClick:X}=O,po=_r(O,["refKey","onChange","onClick"]);let mo={accept:j,multiple:f,type:"file",style:{display:"none"},onChange:ge(te(H,qe)),onClick:ge(te(X,gs)),tabIndex:-1,[L]:q};return W(W({},mo),po)},[q,e,f,qe,r]);return Oe(W({},Uo),{isFocused:Zr&&!r,getRootProps:xs,getInputProps:hs,rootRef:T,inputRef:q,open:ge(xe)})}function ud(o,e){switch(e.type){case"focus":return Oe(W({},o),{isFocused:!0});case"blur":return Oe(W({},o),{isFocused:!1});case"openDialog":return Oe(W({},Qt),{isFileDialogActive:!0});case"closeDialog":return Oe(W({},o),{isFileDialogActive:!1});case"setDraggedFiles":return Oe(W({},o),{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Oe(W({},o),{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return W({},Qt);default:return o}}function Xl(){}var[Ql,$l]=na("Dropzone component was not found in tree");var Jl=s(d(),1),es=s(y(),1);function ea(o){let e=r=>{let{children:t,...a}=We(`Dropzone${ot(o)}`,{},r),n=$l(),f=aa(t)?t:(0,Jl.jsx)("span",{children:t});return n[o]?(0,es.cloneElement)(f,a):null};return e.displayName=`@mantine/dropzone/${ot(o)}`,e}var os=ea("accept"),rs=ea("reject"),ts=ea("idle");var Ee={root:"m_d46a4834",inner:"m_b85f7144",fullScreen:"m_96f6e9ad",dropzone:"m_7946116d"};var id={loading:!1,multiple:!0,maxSize:1/0,autoFocus:!1,activateOnClick:!0,activateOnDrag:!0,dragEventsBubbling:!0,activateOnKeyboard:!0,useFsAccessApi:!0,variant:"light",rejectColor:"red"},pd=(o,{radius:e,variant:r,acceptColor:t,rejectColor:a})=>{let n=o.variantColorResolver({color:t||o.primaryColor,theme:o,variant:r}),f=o.variantColorResolver({color:a||"red",theme:o,variant:r});return{root:{"--dropzone-radius":la(e),"--dropzone-accept-color":n.color,"--dropzone-accept-bg":n.background,"--dropzone-reject-color":f.color,"--dropzone-reject-bg":f.background}}},ce=Zo((o,e)=>{let r=We("Dropzone",id,o),{classNames:t,className:a,style:n,styles:f,unstyled:l,vars:c,radius:i,disabled:u,loading:p,multiple:I,maxSize:h,accept:m,children:C,onDropAny:F,onDrop:S,onReject:b,openRef:D,name:P,maxFiles:G,autoFocus:R,activateOnClick:$,activateOnDrag:V,dragEventsBubbling:j,activateOnKeyboard:A,onDragEnter:fe,onDragLeave:de,onDragOver:T,onFileDialogCancel:q,onFileDialogOpen:Uo,preventDropOnDocument:z,useFsAccessApi:Zr,getFilesFromEvent:co,validator:He,rejectColor:Qr,acceptColor:Be,enablePointerEvents:zo,loaderProps:ue,inputProps:_o,mod:Wo,...Go}=r,Pe=Ko({name:"Dropzone",classes:Ee,props:r,className:a,style:n,classNames:t,styles:f,unstyled:l,vars:c,varsResolver:pd}),{getRootProps:qe,getInputProps:xe,isDragAccept:Ue,isDragReject:ze,open:Vo}=Jt({onDrop:F,onDropAccepted:S,onDropRejected:b,disabled:u||p,accept:Array.isArray(m)?m.reduce((ge,io)=>({...ge,[io]:[]}),{}):m,multiple:I,maxSize:h,maxFiles:G,autoFocus:R,noClick:!$,noDrag:!V,noDragEventsBubbling:!j,noKeyboard:!A,onDragEnter:fe,onDragLeave:de,onDragOver:T,onFileDialogCancel:q,onFileDialogOpen:Uo,preventDropOnDocument:z,useFsAccessApi:Zr,validator:He,...co?{getFilesFromEvent:co}:null});sa(D,Vo);let uo=!Ue&&!ze;return(0,Ne.jsx)(Ql,{value:{accept:Ue,reject:ze,idle:uo},children:(0,Ne.jsxs)(Yo,{...qe(),...Pe("root",{focusable:!0}),...Go,mod:[{accept:Ue,reject:ze,idle:uo,loading:p,"activate-on-click":$},Wo],children:[(0,Ne.jsx)(ha,{visible:p,overlayProps:{radius:i},unstyled:l,loaderProps:ue}),(0,Ne.jsx)("input",{...xe(_o),name:P}),(0,Ne.jsx)("div",{...Pe("inner"),ref:e,"data-enable-pointer-events":zo||void 0,children:C})]})})});ce.classes=Ee;ce.displayName="@mantine/dropzone/Dropzone";ce.Accept=os;ce.Idle=ts;ce.Reject=rs;var Wr=s(d(),1),No=s(y(),1);var md={loading:!1,maxSize:1/0,activateOnClick:!1,activateOnDrag:!0,dragEventsBubbling:!0,activateOnKeyboard:!0,active:!0,zIndex:fa("max"),withinPortal:!0},Gr=Zo((o,e)=>{let r=We("DropzoneFullScreen",md,o),{classNames:t,className:a,style:n,styles:f,unstyled:l,vars:c,active:i,onDrop:u,onReject:p,zIndex:I,withinPortal:h,portalProps:m,...C}=r,F=Ko({name:"DropzoneFullScreen",classes:Ee,props:r,className:a,style:n,classNames:t,styles:f,unstyled:l,rootSelector:"fullScreen"}),{resolvedClassNames:S,resolvedStyles:b}=da({classNames:t,styles:f,props:r}),[D,P]=(0,No.useState)(0),[G,{open:R,close:$}]=ca(!1),V=A=>{A.dataTransfer?.types.includes("Files")&&(P(fe=>fe+1),R())},j=()=>{P(A=>A-1)};return(0,No.useEffect)(()=>{D===0&&$()},[D]),(0,No.useEffect)(()=>{if(i)return document.addEventListener("dragenter",V,!1),document.addEventListener("dragleave",j,!1),()=>{document.removeEventListener("dragenter",V,!1),document.removeEventListener("dragleave",j,!1)}},[i]),(0,Wr.jsx)(ua,{...m,withinPortal:h,children:(0,Wr.jsx)(Yo,{...F("fullScreen",{style:{opacity:G?1:0,pointerEvents:G?"all":"none",zIndex:I}}),ref:e,children:(0,Wr.jsx)(ce,{...C,classNames:S,styles:b,unstyled:l,className:Ee.dropzone,onDrop:A=>{u?.(A),$(),P(0)},onReject:A=>{p?.(A),$(),P(0)}})})})});Gr.classes=Ee;Gr.displayName="@mantine/dropzone/DropzoneFullScreen";ce.FullScreen=Gr;var Vr=ce;var me=s(y(),1);var ns=s(d(),1);function as(){return(0,ns.jsx)(Co,{stroke:1.5,style:{width:_e(52),height:_e(52),color:"var(--mantine-color-blue-6)"}})}var Ho=s(d(),1);function fs(){return(0,Ho.jsxs)(pa,{gap:"xl",justify:"center",mih:220,style:{pointerEvents:"none"},children:[(0,Ho.jsx)(ft,{stroke:1.5,style:{width:_e(52),height:_e(52),color:"var(--mantine-color-red-6)"}}),(0,Ho.jsx)(ma,{inline:!0,size:"xl",children:"Unsupported file format"})]})}var oa=s(d(),1);function ls({onClick:o}){return(0,oa.jsx)(J,{c:"primary.0",size:"lg",onClick:o,children:(0,oa.jsx)(Co,{size:"20"})})}var ae=s(y(),1);function ss(o,e){return o.filter(r=>e.find(t=>t.filename===r.name))}var jr=s(y(),1);var E=s(d(),1);function Id({overweight:o,other:e,max:r}){return(0,E.jsxs)(E.Fragment,{children:[o.length>1?(0,E.jsxs)("p",{children:["You have ",o.length," file(s) that are too big (up to ",Mo(r),")."]}):(0,E.jsxs)("p",{children:["This file is too big (",Mo(o[0].size),")."]}),e&&e.length>0&&(0,E.jsxs)("p",{children:["You can upload the remaining ",e.length," file(s) or cancel upload."]}),(0,E.jsx)(ga,{}),(0,E.jsx)("p",{children:(0,E.jsx)("i",{children:(0,E.jsx)("small",{children:'If you want to upload big files, please update "maxsize" value in your config.json and restart nanomoln.'})})})]})}function xd({other:o,onUpload:e}){let{hide:r}=ie();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(le,{style:o&&o.length>0?{marginRight:"auto"}:{},variant:"subtle",onClick:r,children:"Cancel upload"}),o&&o.length>0&&(0,E.jsxs)(le,{onClick:e,children:["Upload ",o.length," files"]})]})}function cs(){let{show:o,hide:e}=ie(),r=(0,jr.useCallback)((t,a,n,f)=>{t&&t.length>0?o("Allowed upload size exceeded",(0,E.jsx)(Id,{max:n,other:a,overweight:t}),(0,E.jsx)(xd,{other:a,onUpload:f})):console.error("Trying to show empty overweight confirmation")},[o]);return(0,jr.useMemo)(()=>({confirm:r,hide:e}),[r,e])}var Kr=s(y(),1);var Xr={list:"P7AHk",item:"y9DC4",wrapper:"etJE2"};var N=s(d(),1),ds=10;function gd({intersection:o}){let e=o.length>ds?o.slice(0,ds):o;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("p",{children:"This files will be overwritten:"}),(0,N.jsx)("ul",{className:Xr.list,children:e.map(r=>(0,N.jsx)("li",{className:Xr.item,title:r.name,children:(0,N.jsx)("span",{className:Xr.wrapper,children:r.name})},r.name))}),e.length<o.length&&(0,N.jsx)("p",{children:(0,N.jsxs)("strong",{children:["And ",o.length-e.length," more"]})})]})}function hd({intersection:o,rest:e,onOverwrite:r,onIgnore:t}){let{hide:a}=ie();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(le,{style:{marginRight:"auto"},variant:"subtle",onClick:a,children:"Cancel upload"}),(0,N.jsx)(le,{color:"red",onClick:r,children:o.length>1?"Overwrite all":"Overwrite"}),o.length>1&&e&&e.length>0&&(0,N.jsx)(le,{onClick:t,children:"Ignore exist"})]})}function us(){let{show:o,hide:e}=ie(),r=(0,Kr.useCallback)((t,a,n,f)=>{t&&t.length>0?o("Files already exist",(0,N.jsx)(gd,{intersection:t}),(0,N.jsx)(hd,{intersection:t,rest:a,onIgnore:f,onOverwrite:n})):console.error("Trying to show empty overwrite confirmation")},[o]);return(0,Kr.useMemo)(()=>({confirm:r,hide:e}),[r,e])}function is(){let o=(0,ae.useContext)(go),{data:e}=U(),{upload:r}=Ge(),{confirm:t,hide:a}=us(),{confirm:n,hide:f}=cs(),l=(0,ae.useCallback)(h=>()=>{r(h,e?.path??""),a()},[e,a,r]),c=(0,ae.useCallback)((h,m)=>()=>{let C=h.filter(F=>!m.includes(F));C.length>0&&r(C,e?.path??""),a()},[e,r,a]),i=(0,ae.useCallback)((h,m)=>{let C=h.filter(F=>!m.includes(F));t(m,C,l(h),c(h,m))},[t,l,c]),u=(0,ae.useCallback)(h=>{let m=ss(h,e?.files??[]);m.length>0?i(h,m):r(h,e?.path??"")},[i,r,e]),p=(0,ae.useCallback)((h,m)=>{let C=h.filter(b=>b.size>(o?.maxsize??1e7)),F=h.filter(b=>!C.includes(b)),S=C.reduce((b,D)=>Math.max(b,D.size),-1/0);C.length>0?n(C,F,S,()=>{m(F)}):m(F)},[]),I=(0,ae.useCallback)(h=>{e?.path&&p(h,m=>{f(),u(m)})},[e,p,u,f]);return(0,ae.useMemo)(()=>({upload:I}),[I])}var ps={root:"cr9-2"};var ne=s(d(),1);function ms(){let o=(0,me.useRef)(null),{accept:e}=(0,me.useContext)(go)??{accept:["*"]},{upload:r}=is(),[t,a]=(0,me.useState)(!0),n=(0,me.useCallback)(()=>{a(!1),setTimeout(()=>{a(!0)},100)},[]),f=(0,me.useCallback)((l,c)=>{l.length===0&&c.length===0&&n()},[n]);return(0,ne.jsxs)(ne.Fragment,{children:[t&&(0,ne.jsxs)(Vr.FullScreen,{active:!0,accept:e,className:ps.root,openRef:o,onDrop:r,onDropAny:f,children:[(0,ne.jsx)(Vr.Accept,{children:(0,ne.jsx)(as,{})}),(0,ne.jsx)(Vr.Reject,{children:(0,ne.jsx)(fs,{})})]}),(0,ne.jsx)(ls,{onClick:()=>o.current?.()})]})}var Ie=s(d(),1);function Is(){let{data:o,create:e}=U(),[r,t]=(0,Yr.useState)(!1);return(0,Yr.useEffect)(()=>{t(!0)},[]),!r||!o?null:(0,Ie.jsxs)(Ie.Fragment,{children:[(0,Ie.jsx)(bl,{}),(0,Ie.jsx)(ms,{}),(0,Ie.jsx)(J,{c:"primary.0",size:"lg",onClick:e,children:(0,Ie.jsx)(we,{size:"20"})})]})}var qo=s(d(),1);function cS(){let{data:o}=U();return(0,qo.jsx)(Da,{headerActions:(0,qo.jsx)(Is,{}),children:o?(0,qo.jsx)(hl,{}):(0,qo.jsx)(Fl,{})})}export{Dd as a,cS as b,Cd as c};
/*! Bundled license information:

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

@tabler/icons-react/dist/esm/defaultAttributes.mjs:
  (**
   * @license @tabler/icons-react v3.2.0 - MIT
   *
   * This source code is licensed under the MIT license.
   * See the LICENSE file in the root directory of this source tree.
   *)

@tabler/icons-react/dist/esm/createReactComponent.mjs:
  (**
   * @license @tabler/icons-react v3.2.0 - MIT
   *
   * This source code is licensed under the MIT license.
   * See the LICENSE file in the root directory of this source tree.
   *)

@tabler/icons-react/dist/esm/icons/IconDownload.mjs:
  (**
   * @license @tabler/icons-react v3.2.0 - MIT
   *
   * This source code is licensed under the MIT license.
   * See the LICENSE file in the root directory of this source tree.
   *)

@tabler/icons-react/dist/esm/icons/IconFolderUp.mjs:
  (**
   * @license @tabler/icons-react v3.2.0 - MIT
   *
   * This source code is licensed under the MIT license.
   * See the LICENSE file in the root directory of this source tree.
   *)

@tabler/icons-react/dist/esm/icons/IconPencil.mjs:
  (**
   * @license @tabler/icons-react v3.2.0 - MIT
   *
   * This source code is licensed under the MIT license.
   * See the LICENSE file in the root directory of this source tree.
   *)

@tabler/icons-react/dist/esm/icons/IconReload.mjs:
  (**
   * @license @tabler/icons-react v3.2.0 - MIT
   *
   * This source code is licensed under the MIT license.
   * See the LICENSE file in the root directory of this source tree.
   *)

@tabler/icons-react/dist/esm/icons/IconUpload.mjs:
  (**
   * @license @tabler/icons-react v3.2.0 - MIT
   *
   * This source code is licensed under the MIT license.
   * See the LICENSE file in the root directory of this source tree.
   *)

@tabler/icons-react/dist/esm/icons/IconX.mjs:
  (**
   * @license @tabler/icons-react v3.2.0 - MIT
   *
   * This source code is licensed under the MIT license.
   * See the LICENSE file in the root directory of this source tree.
   *)

@tabler/icons-react/dist/esm/icons/IconFileFilled.mjs:
  (**
   * @license @tabler/icons-react v3.2.0 - MIT
   *
   * This source code is licensed under the MIT license.
   * See the LICENSE file in the root directory of this source tree.
   *)

@tabler/icons-react/dist/esm/icons/IconFolderFilled.mjs:
  (**
   * @license @tabler/icons-react v3.2.0 - MIT
   *
   * This source code is licensed under the MIT license.
   * See the LICENSE file in the root directory of this source tree.
   *)

@tabler/icons-react/dist/esm/icons/IconTrashFilled.mjs:
  (**
   * @license @tabler/icons-react v3.2.0 - MIT
   *
   * This source code is licensed under the MIT license.
   * See the LICENSE file in the root directory of this source tree.
   *)

@tabler/icons-react/dist/esm/tabler-icons-react.mjs:
  (**
   * @license @tabler/icons-react v3.2.0 - MIT
   *
   * This source code is licensed under the MIT license.
   * See the LICENSE file in the root directory of this source tree.
   *)

filesize/dist/filesize.esm.js:
  (**
   * filesize
   *
   * @copyright 2024 Jason Mulligan <jason.mulligan@avoidwork.com>
   * @license BSD-3-Clause
   * @version 10.1.2
   *)
*/
